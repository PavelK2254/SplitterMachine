let getProductsJSON,OrderModel,exampleOrderNums,init,addNewOrdersToDB,getOrderByBarcode;_380‍.x([["updateDbWithNewOrders",()=>updateDbWithNewOrders],["addtestOrders",()=>addtestOrders],["getSingleOrder",()=>getSingleOrder]]);_380‍.w("../Networking/dataRepository",[["getProductsJSON",["getProductsJSON"],function(v){getProductsJSON=v}]]);_380‍.w("../Models/orderModel",[["OrderModel",["OrderModel"],function(v){OrderModel=v}]]);_380‍.w("./Utils/orderNumbers",[["exampleOrderNums",["exampleOrderNums"],function(v){exampleOrderNums=v}]]);_380‍.w("../DAO/dbAccessManager",[["init",["init"],function(v){init=v}],["addNewOrdersToDB",["addNewOrdersToDB"],function(v){addNewOrdersToDB=v}],["getOrderByBarcode",["getOrderByBarcode"],function(v){getOrderByBarcode=v}]]);



var currentPage = '1';
var ordersGetter = getProductsJSON(currentPage);
var ordersCollection = [];



       function updateDbWithNewOrders() {

    init().then(function(result) {
        ordersGetter.then(function(result) {
            result.products.forEach(element => {
                console.log(`${element.id} ${element.id} ${element.barcode} 0, 1, ${element.longName}`);
                //ordersCollection.push({ orderNumber: element.id, barcode: element.barcode, numberOfUnits: 0, status: 1, productName: element.longName })
                ordersCollection.push(new OrderModel(element.id, element.barcode, 0, 1, element.longName))
            });
            addNewOrdersToDB(ordersCollection).then(function(result) {
                //getOrderByBarcode('60').then(function(result) {
                _380‍.g.console.log(result);

            }, function(err) {
                _380‍.g.console.error(err);
            })
        }, function(err) {
            _380‍.g.console.log(err);

        })
    }, function(err) {
        _380‍.g.console.log(err);
    });
}

//TODO Remove this
       function addtestOrders() {
    var testOrderNumber = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
    exampleOrderNums.forEach(element => {
        //ordersCollection.push(new OrderModel(element.id, element.barcode, 0, 1, element.longName))
        _380‍.g.console.log(new OrderModel(testOrderNumber[Math.floor(Math.random() * 11)], element, 0, 1, "test item " + exampleOrderNums.indexOf(element)));
    });

}


       function getSingleOrder(barcode) {
    getOrderByBarcode(barcode).then(function(result) {
        _380‍.g.console.log(result);

    }, function(err) {
        _380‍.g.console.log("Error " + err);
    });
}